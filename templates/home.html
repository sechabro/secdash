<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Welcome to SecDash</title>
    <link rel="stylesheet" , href="/styles/home.css">
</head>

<body>
    <nav class="navbar">
        <img src="/img/secdash_icon_40.png" alt="SecDash Logo" class="logo">
        <div class="nav-left">
            <a href="#">SecDash</a>
        </div>
        <div class="nav-right">
            <a href="#about-section">About</a>
            <a href="#login-form">Login</a>
        </div>
    </nav>
    <section id="top-section" class="hero">
        <img src="/img/secdash_lh.png" alt="SecDash Logo" class="hero-logo">
    </section>
    <section id="about-section" class="about-section">
        <div class="about-content">
            <h2>Welcome to SecDash</h2>
            <hr class="about-divider">
            <div class="about-text">
                <p>There is an old Japanese proverb "灯台下暗し" which translates to "It's darkest at the bottom of the
                    lighthouse". Meaning: it's hard to see what's going on right underneath you.</p>

                <p>For developers hosting on VPS services, observable security metrics are crucial to know precisely how
                    IP addresses around the internet are trying to mess with your server. SecDash was created to
                    increase this observability. A real-time security observability platform built for developers and
                    non-developers, sysadmins, and anyone managing their own infrastructure. It shows you who's knocking
                    on your server, where they’re from, how often they’re trying, and what they’re trying to do.
                    It analyzes suspicious activity using AI, correlates data across multiple tools, and even runs
                    behind-the-scenes automation, banning malicious IPs and surfacing patterns you might’ve missed.</p>

                <p>SecDash is the lamp post at the base of your lighthouse. </p>
            </div>
        </div>
    </section>

    <section id="login-section" class="login-section">
        <main class="main-content">
            <h2 class="login-heading">Access SecDash</h2>
            <!-- Login Form -->
            <form id="login-form" action="/login" method="POST">
                <label for="username">Email:</label>
                <input type="username" id="username" name="username" required>

                <label for="password">Password:</label>
                <input type="password" id="password" name="password" required>

                <button id="login-button" type="submit">Log In</button>
            </form>

        </main>
    </section>


    <!-- Registration Link. Turn back on after frontend character checks are complete. -->
    <!--<p>Not a member yet? <a href="#" id="register-link">Register here</a></p>-->

    <!-- Registration Modal -->
    <div id="register-modal" class="modal">
        <div class="modal-content">
            <form id="reg-form" action="/register" method="POST">
                <div class="form-header">
                    <h2>Register</h2>
                    <button type="button" class="close-btn">&times;</button>
                </div>
                <label for="reg-username">username:</label>
                <input type="text" id="reg-username" name="username" required>

                <label for="reg-email">email:</label>
                <input type="email" id="reg-email" name="email" required>

                <label for="reg-password">password:</label>
                <input type="password" id="reg-password" name="password" required>

                <button id="register-button" type="submit">Register</button>
            </form>
        </div>
    </div>
    <script>
        // Modal functionality

        // Get modal elements
        const modal = document.getElementById("register-modal");
        const registerLink = document.getElementById("register-link");
        const closeBtn = document.querySelector(".modal-content .close-btn");
        // Show modal when "Register here" is clicked
        registerLink.addEventListener("click", (e) => {
            e.preventDefault();
            modal.style.display = "block";
        });

        // Hide modal when the close button is clicked
        closeBtn.addEventListener("click", () => {
            modal.style.display = "none";
        });

        // Hide modal if user clicks outside modal content
        window.addEventListener("click", (e) => {
            if (e.target === modal) {
                modal.style.display = "none";
            }
        });

        // Login Processing
        /* const loginButton = document.getElementById("login-button")
 
         // login listener
         loginButton.addEventListener("click", async (e) => {
             // Prevent the form's default submission behavior
             e.preventDefault();
             const loginForm = document.querySelector("#login-form")
 
             const loginValues = new FormData(loginForm);
 
             // FormData conversion
             const loginData = {};
             loginValues.forEach((value, key) => {
                 loginData[key] = value;
             });
 
             try {
                 // Post the form data as JSON to the /login endpoint
                 const loginResponse = await fetch("/login", {
                     method: "POST",
                     headers: {
                         "Content-Type": "application/x-www-form-urlencoded"
                     },
                     body: JSON.stringify(loginData)
                 });
                 // Check if the response is OK (code 200)
                 if (!loginResponse.ok) {
                     throw new Error(`login failed: ${loginResponse.statusText}`);
                 }
 
                 // Optionally, process the JSON response
                 const tokenData = await loginResponse.json();
                 console.log("RESPONSE: ", tokenData)
             } catch (error) {
                 console.error("Error during login:", error);
             }
         }); */
    </script>
</body>

</html>